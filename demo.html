<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Swiftora Demo</title>
  <meta name="theme-color" content="#ffffff" />
  <meta name="description" content="Upload multiple photos and let Swiftora draft the listing. Add optional details if you want." />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <script>window.__ASSET_VERSION__="v2025-08-09-16";</script>

  <link rel="manifest" href="/manifest.webmanifest?v=v2025-08-09-16" />
  <link rel="icon" href="/swiftora_icon_192x192.png" />
  <link rel="stylesheet" href="/style.css?v=v2025-08-09-16" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- P&L step helpers -->
  <style>
    .pnl .kpis{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-bottom:14px}
    .pnl .kpi{background:#fff;border:1px solid #e8ebf3;border-radius:12px;padding:14px 16px;box-shadow:0 1px 2px rgba(16,24,40,.04)}
    .pnl .kpi-label{font-size:.85rem;color:#6b7280;margin-bottom:6px}
    .pnl .kpi-value{font-weight:800;font-size:1.4rem}
    .pnl .kpi-sub{margin-top:4px;font-size:.85rem;color:#6b7280}
    .pnl-table{border:1px solid #e8ebf3;border-radius:12px;overflow:hidden;background:#fff}
    .pnl-table .row{display:grid;grid-template-columns:1fr 180px;gap:12px;padding:12px 14px;border-top:1px solid #f2f4f7}
    .pnl-table .row.header{background:#fafafa;font-weight:700;border-top:none}
    .pnl-table .num{text-align:right}
    .pnl-table input{width:140px;text-align:right}
    .pnl-table .sub{background:#fcfcfe}
    .pnl-table .neg{color:#b42318}
    .pnl-table .total{background:#f9fafb;font-weight:700}
    .pnl-table .total.strong{background:#fff7ed;border-top:2px solid #fde68a}
    .bars{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .bar{font-size:.9rem;color:#374151}
    .bar .bar-outer{height:10px;border-radius:999px;background:#eef2ff;margin-top:6px;overflow:hidden}
    .bar .bar-inner{height:100%;width:0;border-radius:999px;background:linear-gradient(90deg,#16a34a,#22c55e)}
    @media (max-width:700px){
      .pnl .kpis{grid-template-columns:1fr}
      .bars{grid-template-columns:1fr}
      .pnl-table .row{grid-template-columns:1fr 140px}
      .pnl-table input{width:120px}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="brand"><span class="brand-name">Swiftora</span></div>
    <nav class="site-nav">
      <a href="/index.html">Home</a>
      <a class="active" href="/demo.html">Live Demo</a>
      <a href="/about.html">About</a>
      <a class="cta" href="/index.html#signup">Get Updates</a>
    </nav>
  </header>

  <main class="app-container">
    <div class="progress"><div class="progress-bar" id="progressBar" style="width:20%"></div></div>
    <div class="stepper" id="stepper" aria-label="Demo steps">
      <div class="dot active">1</div><div class="dot">2</div><div class="dot">3</div><div class="dot">4</div><div class="dot">5</div>
    </div>

    <!-- STEP 1 -->
    <section class="screen active" id="step1">
      <h1>Upload & Tell Us a Bit</h1>
      <div class="grid-two">
        <div class="card">
          <label class="block-label">Item photos (optional — multiple allowed)
            <input type="file" id="upload" accept="image/*" multiple />
          </label>
          <div id="thumbs" class="preview-grid" aria-live="polite"></div>

          <div class="coverage" id="coverageWrap" style="display:none">
            <small>Coverage</small>
            <div class="coverage-bar"><div id="coverageFill"></div></div>
            <small id="coverageLabel">0/3</small>
          </div>
          <p class="mini-hint">Recommended angles: <strong>Front</strong>, <strong>Back</strong> or <strong>Base/Mark</strong>, and a <strong>Close-up</strong>. No photos? We’ll still generate a draft.</p>
        </div>

        <div class="card">
          <div class="grid">
            <label class="block-label">Describe your item (optional)
              <textarea id="field-desc" rows="3" placeholder="e.g., amber glass vase, ribbed, 9 inches tall, likely 1960s. Marked Fenton on base."></textarea>
            </label>
            <p class="mini-hint">Leave blank and Swiftora will make reasonable assumptions.</p>

            <div class="block-label">Condition (optional)
              <div class="chip-row" id="condChips" role="group" aria-label="Condition">
                <button type="button" data-value="New" class="chip">New</button>
                <button type="button" data-value="Like New" class="chip">Like New</button>
                <button type="button" data-value="Good" class="chip">Good</button>
                <button type="button" data-value="Fair" class="chip">Fair</button>
                <button type="button" data-value="As-is" class="chip">As-is</button>
              </div>
              <input id="field-condition" type="hidden" />
            </div>

            <label class="block-label">Estimated cost — what you paid (optional)
              <input id="field-cost" type="number" inputmode="decimal" step="0.01" placeholder="e.g., 5.00" />
            </label>
          </div>
        </div>
      </div>

      <details class="card">
        <summary><strong>Photo tips for better matches</strong></summary>
        <ul>
          <li>Good lighting (window/daylight bulb)</li>
          <li>Neutral background (plain table or sheet)</li>
          <li>Angles: front, back, base/mark, close-up texture</li>
          <li>Size reference (ruler/coin)</li>
        </ul>
      </details>

      <p id="step1Errors" class="errors" aria-live="polite">
        Tip: you can leave everything blank and hit Next—Swiftora will fill in sensible defaults.
      </p>
      <div class="actions">
        <button class="btn btn-next" id="step1Btn">Next</button>
      </div>
    </section>

    <!-- STEP 2 -->
    <section class="screen" id="step2">
      <h1>Listing & Live Results</h1>

      <div class="card">
        <h3>Status</h3>
        <ul id="statusList" class="status"></ul>
      </div>

      <div class="grid-two">
        <div class="card"><h3>Draft Listing</h3><div id="listingCard" aria-live="polite"></div></div>
        <div class="card"><h3>Sold Comparables (sample)</h3><div id="compsCard"></div></div>
      </div>

      <div class="grid-two">
        <div class="card table"><h3 style="padding:16px">Attributes</h3><table class="attr-table" id="attrsCard"></table></div>
        <div class="card"><h3>Confidence</h3><div id="confidenceCard"></div></div>
      </div>

      <p class="disclaimer">This is a simulated preview (no live AI yet). Real-time lookup arrives in the MVP.</p>
      <div class="actions">
        <button class="btn btn-back" id="back2">Back</button>
        <button class="btn btn-next" id="step2Btn">Next</button>
      </div>
    </section>

    <!-- STEP 3 — P&L -->
    <section class="screen" id="step3">
      <h1>Profit &amp; Loss</h1>
      <div class="card pnl">
        <div class="kpis">
          <div class="kpi">
            <div class="kpi-label">Price</div>
            <div class="kpi-value" id="kpi-price">$0.00</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Profit</div>
            <div class="kpi-value" id="kpi-profit">$0.00</div>
            <div class="kpi-sub" id="kpi-margin">Margin 0%</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">ROI</div>
            <div class="kpi-value" id="kpi-roi">—</div>
          </div>
        </div>

        <div class="pnl-table">
          <div class="row header"><div>Item</div><div class="num">Amount</div></div>

          <div class="row">
            <div>Listing price</div>
            <div class="num"><input id="adj-price" type="number" inputmode="decimal" step="0.01" placeholder="0.00" /></div>
          </div>

          <div class="row sub">
            <div>Platform fees <span id="fee-meta"></span></div>
            <div class="num neg">-<span id="fee-amt">$0.00</span></div>
          </div>

          <div class="row sub">
            <div>Shipping</div>
            <div class="num neg"><input id="adj-ship" type="number" inputmode="decimal" step="0.01" placeholder="0.00" /></div>
          </div>

          <div class="row sub">
            <div>Item cost</div>
            <div class="num neg"><input id="adj-cost" type="number" inputmode="decimal" step="0.01" placeholder="0.00" /></div>
          </div>

          <div class="row total">
            <div>Net</div>
            <div class="num" id="net-amt">$0.00</div>
          </div>

          <div class="row total strong">
            <div>Profit</div>
            <div class="num" id="profit-amt">$0.00</div>
          </div>
        </div>

        <div class="bars">
          <div class="bar">Margin <span id="margin-pct"></span>
            <div class="bar-outer"><div id="margin-bar" class="bar-inner"></div></div>
          </div>
          <div class="bar">ROI <span id="roi-pct"></span>
            <div class="bar-outer"><div id="roi-bar" class="bar-inner"></div></div>
          </div>
        </div>
      </div>

      <p class="hint">Tweak price/fees/shipping/cost to see how net profit and ROI change.</p>
      <div class="actions">
        <button class="btn btn-back" id="back3">Back</button>
        <button class="btn btn-next" id="step3Btn">Next</button>
      </div>
    </section>

    <!-- STEP 4 -->
    <section class="screen" id="step4">
      <h1>Your Progress</h1>
      <div class="card center">
        <p class="big">Nice!</p>
        <p>You’ve earned <strong><span id="earnedXP">0</span> XP</strong> in this run.</p>
        <div class="meter"><div id="levelMeter"></div></div>
        <p class="hint">Keep listing to level up and unlock advanced price tools.</p>
      </div>
      <div class="actions">
        <button class="btn btn-back" id="back4">Back</button>
        <button class="btn btn-next" id="step4Btn">Next</button>
      </div>
    </section>

    <!-- STEP 5 -->
    <section class="screen" id="step5">
      <h1>Get Early Access</h1>
      <div class="card center">
        <p>Like what you saw? Join our waitlist and be first to try the live version.</p>
        <a class="btn primary" href="/index.html#signup">Sign Me Up</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; <span id="y"></span> Swiftora LLC. All rights reserved. · <a href="/privacy.html">Privacy</a></p>
  </footer>

  <script>
  (() => {
    const V=(window.__ASSET_VERSION__||"").toString();
    const KEY="__swiftora_build__";
    const qp=new URLSearchParams(location.search);

    if(qp.get("flush")==="1"){
      (async()=>{
        if('caches' in window){const ks=await caches.keys(); await Promise.all(ks.map(k=>caches.delete(k)));}
        if('serviceWorker' in navigator){const regs=await navigator.serviceWorker.getRegistrations(); await Promise.all(regs.map(r=>r.unregister()));}
        qp.delete("flush"); qp.set("v",V);
        location.replace(location.pathname+"?"+qp.toString());
      })(); return;
    }

    document.getElementById("y").textContent=new Date().getFullYear();
    const prev=localStorage.getItem(KEY);
    if(prev && prev!==V){
      if('caches' in window){caches.keys().then(ks=>Promise.all(ks.map(k=>caches.delete(k))))}
      if('serviceWorker' in navigator){navigator.serviceWorker.getRegistrations().then(rs=>rs.forEach(r=>r.update()))}
      localStorage.setItem(KEY,V); location.reload(); return;
    }
    localStorage.setItem(KEY,V);

    if("serviceWorker" in navigator){
      window.addEventListener("load",()=>navigator.serviceWorker.register("/service-worker.js?v="+V));
      navigator.serviceWorker.addEventListener("message",(e)=>{ if(e.data?.type==="SW_ACTIVATED") location.reload(); });
    }
  })();
  </script>

  <script src="/demo.js?v=v2025-08-09-16" defer></script>
</body>
</html>

